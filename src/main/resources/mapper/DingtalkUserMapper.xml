<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.we.fc.user.dao.DingtalkUserMapper" >
  <resultMap id="BaseResultMap" type="com.we.fc.user.entity.DingtalkUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="userid" property="id" jdbcType="INTEGER" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="password" property="pwd" jdbcType="VARCHAR" />
    <result column="position" property="position" jdbcType="VARCHAR" />
    <result column="mobile" property="mobile" jdbcType="VARCHAR" />
    <result column="tel" property="tel" jdbcType="VARCHAR" />
    <result column="workPlace" property="workplace" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <result column="orgEmail" property="orgemail" jdbcType="VARCHAR" />
    <result column="jobnumber" property="jobnumber" jdbcType="VARCHAR" />
    <result column="isHide" property="ishide" jdbcType="BIT" />
    <result column="isSenior" property="issenior" jdbcType="BIT" />
    <result column="intermediary_id" property="intermediaryId" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="extattr" property="extattr" jdbcType="LONGVARCHAR" />
    <!--<association property="intermediary" javaType="com.we.fc.intermediary.entity.Intermediary">
      <id  column="intermediary_id" property="intermediaryId"  />
      <result  column="intermediary_name" property="intermediaryName" />
    </association>-->
   <association property="intermediary" column="intermediary_id"
                 select="com.we.fc.intermediary.dao.IntermediaryMapper.selectByPrimaryKey"/>
    <collection property="roles" column="userid" fetchType="lazy"
                select="com.we.fc.role.dao.RoleDao.findByUserId"></collection>
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from dingtalk_user
    where userid = #{id,jdbcType=INTEGER} AND is_admin!=1
  </delete>
  <insert id="insert" parameterType="com.we.fc.user.entity.DingtalkUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into dingtalk_user (userid, `name`, `position`, 
      mobile, tel, workPlace, 
      remark, email, orgEmail, 
      jobnumber, isHide, isSenior,
      interimediary_id,extattr,password)
    values (#{id,jdbcType=INTEGER}, #{name,jdbcType=VARCHAR}, #{position,jdbcType=VARCHAR}, 
      #{mobile,jdbcType=VARCHAR}, #{tel,jdbcType=VARCHAR}, #{workplace,jdbcType=VARCHAR}, 
      #{remark,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR}, #{orgemail,jdbcType=VARCHAR}, 
      #{jobnumber,jdbcType=VARCHAR}, #{ishide,jdbcType=BIT}, #{issenior,jdbcType=BIT}, 
      #{interimediaryId,jdbcType=INTEGER},
      #{extattr,jdbcType=LONGVARCHAR},
    #{pwd,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.we.fc.user.entity.DingtalkUser" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update dingtalk_user
    set `name` = #{name,jdbcType=VARCHAR},
      `position` = #{position,jdbcType=VARCHAR},
      mobile = #{mobile,jdbcType=VARCHAR},
      password = #{pwd,jdbcType=VARCHAR},
      tel = #{tel,jdbcType=VARCHAR},
      workPlace = #{workplace,jdbcType=VARCHAR},
      remark = #{remark,jdbcType=VARCHAR},
      email = #{email,jdbcType=VARCHAR},
      orgEmail = #{orgemail,jdbcType=VARCHAR},
      jobnumber = #{jobnumber,jdbcType=VARCHAR},
      isHide = #{ishide,jdbcType=BIT},
      isSenior = #{issenior,jdbcType=BIT},
      interimediary_id = #{interimediaryId,jdbcType=INTEGER},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      extattr = #{extattr,jdbcType=LONGVARCHAR}
    where userid = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select userid, password,`name`, `position`, mobile, tel, workPlace, remark, email, orgEmail,
    jobnumber, isHide, isSenior, intermediary_id, create_time, update_time, extattr
    from dingtalk_user
    where userid = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select userid, password,`name`, `position`, mobile, tel, workPlace, remark, email, orgEmail,
    jobnumber, isHide, isSenior, interimediary_id, create_time, update_time, extattr
    from dingtalk_user
  </select>

  <select id="findByTel" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select userid, password,`name`, `position`, mobile, tel, workPlace, remark, email, orgEmail,
    jobnumber, isHide, isSenior, intermediary_id, create_time, update_time, extattr
    from dingtalk_user WHERE  mobile=#{tel,jdbcType=VARCHAR}
  </select>
</mapper>