<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.we.fc.device.dao.DeviceMapper" >
  <resultMap id="BaseResultMap" type="com.we.fc.device.entity.Device" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="device_id" property="id" jdbcType="INTEGER" />
    <result column="device_production_num" property="deviceProductionNum" jdbcType="VARCHAR" />
    <result column="deivce_status" property="deivceStatus" jdbcType="TINYINT" />
    <result column="device_location_x" property="deviceLocationX" jdbcType="VARCHAR" />
    <result column="device_location_y" property="deviceLocationY" jdbcType="VARCHAR" />
    <result column="device_create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="device_update_time" property="updateTime" jdbcType="TIMESTAMP" />
    <association property="operateUser" javaType="com.we.fc.user.entity.User">
      <id property="id" column="operate_user_id"></id>
      <result property="realName" column="user_real_name"></result>
    </association>
    <association property="transcribeUser" javaType="com.we.fc.user.entity.User">
      <id property="id" column="transcribe_user_id"></id>
      <result property="realName" column="user_real_name"></result>
    </association>
    <association property="intermediary" javaType="com.we.fc.intermediary.entity.Intermediary">
      <id property="id" column="intermediary_id"></id>
      <result property="intermediaryName" column="intermediary_name"></result>
    </association>
    <association property="project" javaType="com.we.fc.project.entity.Project">
      <id property="id" column="project_id"></id>
      <result property="projectName" column="project_name"></result>
    </association>
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from device
    where device_id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.we.fc.device.entity.Device" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into device (operate_user_id, transcribe_user_id,
      project_id, intermediary_id, device_production_num, 
      deivce_status, device_location_x, device_location_y)
    values (#{operateUser.id,jdbcType=INTEGER},
    #{transcribeUser.id,jdbcType=INTEGER},
      #{project.id,jdbcType=INTEGER},
    #{intermediary.id,jdbcType=INTEGER},
    #{deviceProductionNum,jdbcType=VARCHAR},
      #{deivceStatus,jdbcType=TINYINT},
    #{deviceLocationX,jdbcType=VARCHAR},
    #{deviceLocationY,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.we.fc.device.entity.Device" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update device
    set operate_user_id = #{operateUser.id,jdbcType=INTEGER},
      transcribe_user_id = #{transcribeUser.id,jdbcType=INTEGER},
      project_id = #{project.id,jdbcType=INTEGER},
      intermediary_id = #{intermediary.id,jdbcType=INTEGER},
      device_production_num = #{deviceProductionNum,jdbcType=VARCHAR},
      deivce_status = #{deivceStatus,jdbcType=TINYINT},
      device_location_x = #{deviceLocationX,jdbcType=VARCHAR},
      device_location_y = #{deviceLocationY,jdbcType=VARCHAR}
    where device_id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select *
    from device d LEFT JOIN sys_user u1
    ON d.operate_user_id = u1.user_id
    LEFT JOIN sys_user u2
    ON d.transcribe_user_id = u2.user_id
    LEFT JOIN project p
    ON d.project_id = p.project_id
    where device_id = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select *
    from device d LEFT JOIN sys_user u1
    ON d.operate_user_id = u1.user_id
    LEFT JOIN sys_user u2
    ON d.transcribe_user_id = u2.user_id
    LEFT JOIN project p
    ON d.project_id = p.project_id
    WHERE 1=1
    <if test="deviceProductionNum != null"> and d.device_production_num  LIKE CONCAT('%',#{deviceProductionNum},'%')</if>
    <if test="project !=null and project.projectName!=null"> and p.project_name LIKE CONCAT('%',#{project.projectName},'%')</if>
    <if test="operateUser!=null and operateUser.realName!=null"> and u1.user_real_name LIKE CONCAT('%',#{operateUser.realName},'%')</if>
    <if test="transcribeUser!=null and transcribeUser.realName!=null"> and u2.user_real_name LIKE CONCAT('%',#{transcribeUser.realName},'%')</if>
  </select>
</mapper>